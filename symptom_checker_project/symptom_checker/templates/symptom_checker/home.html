{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'symptom_checker/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'symptom_checker/css/sidebar.css' %}">
    <link rel="stylesheet" href="sidebar.css">
    <title>Medcare | AI</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <button id="toggleSidebar" class="toggle-btn"><i class='bx bx-menu'></i></button>
        <a href="#" class="title">Medcare</a>
        <div class="header-right">
            <a href="#"><i class="bx bx-bell"></i></a>
            <button type="button" class="SOSBtn" id="openModalBtn">SOS <i class="bx bsx-phone-call"></i></button>
        </div>
    </div>

    <!-- The Modal
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Contact Emergency Team</h2>
            <p>For urgent medical attention, please provide your details below.</p>
            <form id="contactForm">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" placeholder="Doe Smith" required>
                <label for="UserNum">Contact Number:</label>
                <input type="number" id="UserNum" required>
                <label for="message">Message:</label>
                <textarea id="message" name="message" placeholder="Explain your needs..." required></textarea>
                <button type="submit">Send</button>
            </form>
        </div>
    </div> -->

    <!-- Sidebar for navigation -->
    <div class="sidebar">
        <div class="logo-details">
            <i class='bx bx-health'></i>
            <div class="logo_name">Medcare</div>
            <i class='bx bx-menu' id="btn"></i>
        </div>
        <ul class="nav-list">
            <li>
                <i class='bx bx-search'></i>
                <input type="text" placeholder="Search...">
                <span class="tooltip">Search</span>
            </li>
            <li><a href="#"><i class='bx bx-grid-alt'></i><span class="links_name">Dashboard</span></a><span class="tooltip">Dashboard</span></li>
            <li><a href="./Pages/Treatment.html"><i class='bx bx-user'></i><span class="links_name">Treatment Plan</span></a><span class="tooltip">Treatment</span></li>
            <li><a href="./Pages/chat.html"><i class='bx bx-chat'></i><span class="links_name">Messages</span></a><span class="tooltip">Messages</span></li>
            <li><a href="#"><i class='bx bx-pie-chart-alt-2'></i><span class="links_name">Patient</span></a><span class="tooltip">Patient</span></li>
            <li><a href="#"><i class='bx bx-cog'></i><span class="links_name">Settings</span></a><span class="tooltip">Settings</span></li>
            <li class="profile">
                <div class="profile-details">
                    <div class="name_job">
                        <div class="name">MedCare</div>
                        <div class="job">User</div>
                    </div>
                </div>
                <a href="#"><i class='bx bx-log-out' id="log_out"></i></a>
            </li>
        </ul>
    </div>

    <!-- Main content area -->
    <section class="home-section">
        <div class="text">Symptom Checker</div>
        <div class="container">
            <form method="POST" id="symptom-form">
                {% csrf_token %}
                <label for="symptoms">Enter your symptoms:</label>
                <textarea name="symptoms" id="symptoms" placeholder="Describe your symptoms here..."></textarea>
                <button type="button" onclick="checkSymptoms()">Check Symptoms</button>
            </form>
            <div id="diagnosis"></div>
        </div>
    </section>

    <div class="footer">
        &copy; 2024 Symptom Checker. All rights reserved.
    </div>

    <script>
        function checkSymptoms() {
            $.post("/check_symptoms/", {
                symptoms: $("#symptoms").val(),
                csrfmiddlewaretoken: '{{ csrf_token }}'
            }, function(data) {
                $("#diagnosis").html(data.diagnosis);
            });
        }

        // Sidebar toggle functionality
        let sidebar = document.querySelector(".sidebar");
        let closeBtn = document.querySelector("#btn");
        closeBtn.addEventListener("click", () => {
            sidebar.classList.toggle("open");
            menuBtnChange();
        });

        function menuBtnChange() {
            closeBtn.classList.toggle("bx-menu-alt-right", sidebar.classList.contains("open"));
            closeBtn.classList.toggle("bx-menu", !sidebar.classList.contains("open"));
        }

        // Modal functionality
        var modal = document.getElementById("contactModal");
        var openModalBtn = document.getElementById("openModalBtn");
        var closeModalBtn = document.getElementsByClassName("close")[0];

        openModalBtn.addEventListener("click", () => modal.style.display = "block");
        closeModalBtn.addEventListener("click", () => modal.style.display = "none");
        window.addEventListener("click", (e) => {
            if (e.target == modal) modal.style.display = "none";
        });
    </script>
</body>
</html>
